<!--  TODO:   Update TestListName, AutoDetectionDllName -->
<Config>
  <ConfigFilePath>
    <PtfFileName>Bin\CommonTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>Bin\CommonTestSuite.ptfconfig</PtfFileName>
    <PtfFileName>Bin\ServerFailoverTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>Bin\ServerFailoverTestSuite.ptfconfig</PtfFileName>
    <PtfFileName>Bin\MS-DFSC_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>Bin\MS-FSA_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>Bin\MS-FSRVP_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>Bin\MS-RSVD_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>Bin\MS-SQOS_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>Bin\Auth_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>Bin\MS-SMB2_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>Bin\MS-SMB2Model_ServerTestSuite.deployment.ptfconfig</PtfFileName>
  </ConfigFilePath>
  <Adapters>
    <Adapter  displayname="An SUT control adapter" name="ISutProtocolControlAdapter">
      <Adapter type="powershell" name="ISutProtocolControlAdapter" scriptdir=".\"/>
      <Adapter type="interactive" name="ISutProtocolControlAdapter"/>
    </Adapter>
  </Adapters>
  <PtfFileNames>
    <PtfFileName>CommonTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>CommonTestSuite.ptfconfig</PtfFileName>
    <PtfFileName>ServerFailoverTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>ServerFailoverTestSuite.ptfconfig</PtfFileName>
    <PtfFileName>MS-DFSC_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>MS-FSA_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>MS-FSRVP_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>MS-RSVD_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>MS-SQOS_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>Auth_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>MS-SMB2_ServerTestSuite.deployment.ptfconfig</PtfFileName>
    <PtfFileName>MS-SMB2Model_ServerTestSuite.deployment.ptfconfig</PtfFileName>
  </PtfFileNames>
  <DllFileNames>
    <DllFileName>Bin\CommonTestSuite.dll</DllFileName>
    <DllFileName>Bin\ServerFailoverTestSuite.dll</DllFileName>
    <DllFileName>Bin\MS-DFSC_ServerTestSuite.dll</DllFileName>
    <DllFileName>Bin\MS-FSA_ServerTestSuite.dll</DllFileName>
    <DllFileName>Bin\MS-FSRVP_ServerTestSuite.dll</DllFileName>
    <DllFileName>Bin\MS-RSVD_ServerTestSuite.dll</DllFileName>
    <DllFileName>Bin\MS-SQOS_ServerTestSuite.dll</DllFileName>
    <DllFileName>Bin\Auth_ServerTestSuite.dll</DllFileName>
    <DllFileName>Bin\MS-SMB2_ServerTestSuite.dll</DllFileName>
    <DllFileName>Bin\MS-SMB2Model_ServerTestSuite.dll</DllFileName>
  </DllFileNames>
  <AutoDetectionDllName>FileServerPlugin.dll</AutoDetectionDllName>
  <ConfigCaseRule>
    <Group name = "Priority">
      <Rule name = "BVT">
        <Category name = "BVT"/>
      </Rule>
      <Rule name = "Non-BVT">
        <Rule name = "Positive">
          <Category name = "Positive"/>
        </Rule>
        <Rule name = "Negative">
          <Rule name = "Compatibility">
            <Category name = "Compatibility"/>
          </Rule>
          <Rule name = "InvalidIdentifier">
            <Category name = "InvalidIdentifier"/>
          </Rule>
          <Rule name = "OutOfBoundary">
            <Category name = "OutOfBoundary"/>
          </Rule>
          <Rule name = "UnexpectedContext">
            <Category name = "UnexpectedContext"/>
          </Rule>
          <Rule name = "UnexpectedFields">
            <Category name = "UnexpectedFields"/>
          </Rule>
        </Rule>
      </Rule>
    </Group>

    <Group name = "SMB Dialect">
      <Rule name = "Server-Supported SMB Dialect">
        <Rule name = "SMB 2.0.2">
          <Category name = "Smb2002"/>
        </Rule>
        <Rule name = "SMB 2.1">
          <Category name = "Smb21"/>
        </Rule>
        <Rule name = "SMB 3.0">
          <Category name = "Smb30"/>
        </Rule>
        <Rule name = "SMB 3.0.2">
          <Category name = "Smb302"/>
        </Rule>
        <Rule name = "SMB 3.1.1">
          <Category name = "Smb311"/>
        </Rule>
      </Rule>
      <Rule name = "Non-SMB Protocol Test Cases">
        <Category name = "NonSmb"/>
      </Rule>
    </Group>

    <Group name ="Feature">
      <Rule name = "Cluster">
        <Rule name = "RSVD (Remote Shared Virtual Disk)">
          <Rule name = "RSVDVersion1">
            <Category name = "RSVDVersion1"/>
          </Rule>
          <Rule name = "RSVDVersion2">
            <Category name = "RSVDVersion2"/>
          </Rule>
        </Rule>
        <Rule name = "SQOS (Storage Quality of Service)">
          <Category name = "SQOS"/>
        </Rule>
        <Rule name = "File Server Failover">
          <Category name = "Failover"/>
        </Rule>
        <Rule name = "SWN (Service Witness)">
          <Category name = "SWN"/>
        </Rule>
      </Rule>
      <Rule name = "Non-Cluster">
        <Rule name = "Auth (Authentication and Authorization)">
          <Rule name = "Authentication">
            <Rule name = "KerberosAuthentication">
              <Category name = "KerberosAuthentication" />
            </Rule>
          </Rule>
          <Rule name = "Authorization">
            <Rule name = "File Access Check">
              <Category name = "FileAccessCheck" />
            </Rule>
            <Rule name = "Folder Access Check">
              <Category name = "FolderAccessCheck" />
            </Rule>
            <Rule name = "Share Access Check">
              <Category name = "ShareAccessCheck" />
            </Rule>
            <Rule name = "Claim Based Access Control">
              <Category name = "CBAC" />
            </Rule>
          </Rule>
        </Rule>
        <Rule name = "SMB2&amp;3">
          <Rule name = "Negotiate">
            <Category name = "Negotiate"/>
          </Rule>
          <Rule name = "Replay">
            <Category name = "Replay"/>
          </Rule>
          <Rule name = "Credit">
            <Category name = "Credit"/>
          </Rule>
          <Rule name = "Signing">
            <Category name = "Signing"/>
          </Rule>
          <Rule name = "Encryption">
            <Category name = "Encryption"/>
          </Rule>
          <Rule name = "MultipleChannel">
            <Category name = "MultipleChannel"/>
          </Rule>
          <Rule name = "Session">
            <Category name = "Session"/>
          </Rule>
          <Rule name = "Tree">
            <Category name = "Tree"/>
          </Rule>
          <Rule name = "CreateClose">
            <Category name = "CreateClose"/>
          </Rule>
          <Rule name = "Oplock">
            <Rule name = "OplockOnShareWithoutForceLevel2OrSOFS">
              <Category name = "OplockOnShareWithoutForceLevel2OrSOFS" />
            </Rule>
            <Rule name = "OplockOnShareWithoutForceLevel2WithSOFS">
              <Category name = "OplockOnShareWithoutForceLevel2WithSOFS" />
            </Rule>
            <Rule name = "OplockOnShareWithForceLevel2WithoutSOFS">
              <Category name = "OplockOnShareWithForceLevel2WithoutSOFS" />
            </Rule>
            <Rule name = "OplockOnShareWithForceLevel2AndSOFS">
              <Category name = "OplockOnShareWithForceLevel2AndSOFS" />
            </Rule>
          </Rule>
          <Rule name = "DirectoryLeasing">
            <Category name = "DirectoryLeasing"/>
          </Rule>
          <Rule name = "LeaseV1">
            <Category name = "LeaseV1"/>
          </Rule>
          <Rule name = "LeaseV2">
            <Category name = "LeaseV2"/>
          </Rule>
          <Rule name = "DurableHandle">
            <Rule name = "DurableHandleV1BatchOplock">
              <Category name = "DurableHandleV1BatchOplock"/>
            </Rule>
            <Rule name = "DurableHandleV1LeaseV1">
              <Category name = "DurableHandleV1LeaseV1"/>
            </Rule>
            <Rule name = "DurableHandleV2BatchOplock">
              <Category name = "DurableHandleV2BatchOplock"/>
            </Rule>
            <Rule name = "DurableHandleV2LeaseV1">
              <Category name = "DurableHandleV2LeaseV1"/>
            </Rule>
            <Rule name = "DurableHandleV2LeaseV2">
              <Category name = "DurableHandleV2LeaseV2"/>
            </Rule>
            <Rule name = "PersistentHandle">
              <Category name = "PersistentHandle"/>
            </Rule>
          </Rule>
          <Rule name = "Compound">
            <Category name = "Compound"/>
          </Rule>
          <Rule name = "AppInstanceId">
            <Category name = "AppInstanceId"/>
          </Rule>
          <Rule name = "AppInstanceVersion">
            <Category name = "AppInstanceVersion"/>
          </Rule>
          <Rule name = "FSCTL/IOCTL">
            <Rule name = "FsctlLmrRequestResiliency">
              <Category name = "FsctlLmrRequestResiliency"/>
            </Rule>
            <Rule name = "FsctlFileLevelTrim">
              <Category name = "FsctlFileLevelTrim"/>
            </Rule>
            <Rule name = "FsctlValidateNegotiateInfo">
              <Category name = "FsctlValidateNegotiateInfo"/>
            </Rule>
            <Rule name = "FsctlSetGetIntegrityInformation">
              <Category name = "FsctlSetGetIntegrityInformation"/>
            </Rule>
            <Rule name = "FsctlOffloadReadWrite">
              <Category name = "FsctlOffloadReadWrite"/>
            </Rule>
            <Rule name = "FsctlEnumerateSnapShots">
              <Category name = "FsctlEnumerateSnapShots"/>
            </Rule>
          </Rule>
          <Rule name = "CombinedFeature">
            <Category name = "CombinedFeature"/>
          </Rule>
          <Rule name = "OperateOneFileFromTwoNodes">
            <Category name = "OperateOneFileFromTwoNodes"/>
          </Rule>
          <Rule name = "MixedOplockLease">
            <Category name = "MixedOplockLease"/>
          </Rule>
          <Rule name = "ChangeNotify">
            <Category name = "ChangeNotify"/>
          </Rule>
          <Rule name = "LockUnlock">
            <Category name = "LockUnlock"/>
          </Rule>
          <Rule name = "QueryAndSetFileInfo">
            <Category name = "QueryAndSetFileInfo"/>
          </Rule>
        </Rule>
        <Rule name = "FSRVP (File Server Remote VSS)">
          <Category name = "FSRVP"/>
        </Rule>
        <Rule name = "DFSC (Distributed File System Referral)">
          <Category name = "DFSC"/>
        </Rule>
        <Rule name = "FSA (File System Algorithms)">
          <Rule name = "OpenFile">
            <Category name = "OpenFile"/>
          </Rule>
          <Rule name = "CreateFile">
            <Category name = "CreateFile"/>
          </Rule>
          <Rule name = "ReadFile">
            <Category name = "ReadFile"/>
          </Rule>
          <Rule name = "WriteFile">
            <Category name = "WriteFile"/>
          </Rule>
          <Rule name = "CloseFile">
            <Category name = "CloseFile"/>
          </Rule>
          <Rule name = "FlushCachedData">
            <Category name = "FlushCachedData"/>
          </Rule>
          <Rule name = "LockAndUnlock">
            <Category name = "LockAndUnlock"/>
          </Rule>
          <Rule name = "ChangeNotification">
            <Category name = "ChangeNotification"/>
          </Rule>
          <Rule name = "IoCtlRequest">
            <Category name = "IoCtlRequest"/>
          </Rule>
          <Rule name = "QueryDirectory">
            <Category name = "QueryDirectory"/>
          </Rule>
          <Rule name = "QueryFileInformation">
            <Category name = "QueryFileInformation"/>
          </Rule>
          <Rule name = "QueryFileSystemInformation">
            <Category name = "QueryFileSystemInformation"/>
          </Rule>
          <Rule name = "QueryQuotaInformation">
            <Category name = "QueryQuotaInformation"/>
          </Rule>
          <Rule name = "QuerySecurityInformation">
            <Category name = "QuerySecurityInformation"/>
          </Rule>
          <Rule name = "SetFileInformation">
            <Category name = "SetFileInformation"/>
          </Rule>
          <Rule name = "SetFileSystemInformation">
            <Category name = "SetFileSystemInformation"/>
          </Rule>
          <Rule name = "SetQuotaInformation">
            <Category name = "SetQuotaInformation"/>
          </Rule>
          <Rule name = "SetSecurityInformation">
            <Category name = "SetSecurityInformation"/>
          </Rule>
          <Rule name = "AlternateDataStream">
            <Category name = "AlternateDataStream"/>
          </Rule>
        </Rule>
      </Rule>
    </Group>
  </ConfigCaseRule>

  <FeatureMapping>
    <Config>
      <!--
        Please be noted that there are 3 filters (group in ConfigCaseRule) in FileServer:
          Priority    (index=0)
          SMB Dialect (index=1)
          Feature     (index=2)
      -->
      <Config name="targetFilterIndex" index = "1"/>
      <Config name="mappingFilterIndex" index = "2"/>
      <!--
        SMB Dialect (index=1) is set as target filter and
        Feature (index=2) is set as mappingFilter.

        Rules in Feature filter (index=2) will be automatically selected
        when any rule is selected in SMB Dialect filter (index=1)
      -->
    </Config>
    <Target name = "Smb2002">
      <!-- When Smb2002 in SMB Dialect filter is selected, the following features in Feature filter will be automatically selected. -->
      <Feature name = "ChangeNotify"/>
      <Feature name = "QueryAndSetFileInfo"/>
      <Feature name = "LockUnlock"/>
      <Feature name = "CreateClose"/>
      <Feature name = "Compound"/>
      <Feature name = "Negotiate"/>
      <Feature name = "Session"/>
      <Feature name = "Tree"/>
      <Feature name = "Credit"/>
      <Feature name = "Signing"/>
      <Feature name = "OplockOnShareWithoutForceLevel2OrSOFS"/>
      <Feature name = "OplockOnShareWithoutForceLevel2WithSOFS"/>
      <Feature name = "OplockOnShareWithForceLevel2WithoutSOFS"/>
      <Feature name = "OplockOnShareWithForceLevel2AndSOFS"/>
      <Feature name = "DurableHandleV1BatchOplock"/>
    </Target>
    <Target name = "Smb21">
      <!-- When Smb21 in SMB Dialect filter is selected, the following features in Feature filter will be automatically selected. -->
      <Feature name = "FsctlLmrRequestResiliency"/>
      <Feature name = "Negotiate"/>
      <Feature name = "Session"/>
      <Feature name = "Credit"/>
      <Feature name = "DurableHandleV1BatchOplock"/>
      <Feature name = "DurableHandleV1LeaseV1"/>
      <Feature name = "LeaseV1"/>
      <Feature name = "ChangeNotify"/>
      <Feature name = "MixedOplockLease"/>
      <Feature name = "OperateOneFileFromTwoNodes"/>
    </Target>
    <Target name = "Smb30">
      <!-- When Smb30 in SMB Dialect filter is selected, the following features in Feature filter will be automatically selected. -->
      <Feature name = "FsctlFileLevelTrim"/>
      <Feature name = "FsctlValidateNegotiateInfo"/>
      <Feature name = "FsctlSetGetIntegrityInformation"/>
      <Feature name = "FsctlOffloadReadWrite"/>
      <Feature name = "FsctlEnumerateSnapShots"/>
      <Feature name = "Signing"/>
      <Feature name = "Encryption"/>
      <Feature name = "DurableHandleV2BatchOplock"/>
      <Feature name = "DurableHandleV2LeaseV1"/>
      <Feature name = "DurableHandleV2LeaseV2"/>
      <Feature name = "PersistentHandle"/>
      <Feature name = "AppInstanceId"/>
      <Feature name = "Replay"/>
      <Feature name = "DirectoryLeasing"/>
      <Feature name = "LeaseV2"/>
      <Feature name = "MultipleChannel"/>
      <Feature name = "ChangeNotify"/>
      <Feature name = "CombinedFeature"/>
      <Feature name = "SWN"/>
      <Feature name = "Failover"/>
    </Target>
    <Target name = "Smb302">
      <!-- When Smb302 in SMB Dialect filter is selected, the following features in Feature filter will be automatically selected. -->
      <Feature name = "ChangeNotify"/>
      <Feature name = "SWN"/>
    </Target>
    <Target name = "Smb311">
      <!-- When Smb311 in SMB Dialect filter is selected, the following features in Feature filter will be automatically selected. -->
      <Feature name = "FsctlValidateNegotiateInfo"/>
      <Feature name = "Negotiate"/>
      <Feature name = "Tree"/>
      <Feature name = "Encryption"/>
      <Feature name = "AppInstanceId"/>
      <Feature name = "AppInstanceVersion"/>
      <Feature name = "ChangeNotify"/>
    </Target>
    <Target name = "NonSmb">
      <!-- When NonSmb in SMB Dialect filter is selected, the following features in Feature filter will be automatically selected. -->
      <Feature name = "DFSC"/>
      <Feature name = "SWN"/>
      <Feature name = "FSRVP"/>
      <Feature name = "RSVDVersion1"/>
      <Feature name = "RSVDVersion2"/>
      <Feature name = "SQOS"/>
      <Feature name = "ShareAccessCheck"/>
      <Feature name = "FolderAccessCheck"/>
      <Feature name = "FileAccessCheck"/>
      <Feature name = "CBAC"/>
      <Feature name = "KerberosAuthentication"/>
      <Feature name = "ChangeNotification"/>
      <Feature name = "CreateFile"/>
      <Feature name = "OpenFile"/>
      <Feature name = "CloseFile"/>
      <Feature name = "IoCtlRequest"/>
      <Feature name = "LockAndUnlock"/>
      <Feature name = "QueryFileInformation"/>
      <Feature name = "SetFileInformation"/>
      <Feature name = "QueryFileSystemInformation"/>
      <Feature name = "SetFileSystemInformation"/>
      <Feature name = "QueryQuotaInformation"/>
      <Feature name = "SetQuotaInformation"/>
      <Feature name = "QuerySecurityInformation"/>
      <Feature name = "SetSecurityInformation"/>
      <Feature name = "QueryDirectory"/>
      <Feature name = "ReadFile"/>
      <Feature name = "WriteFile"/>
      <Feature name = "FlushCachedData"/>
      <Feature name = "AlternateDataStream"/>
    </Target>
  </FeatureMapping>

  <TestCategories>TestCategories.xml</TestCategories>
  <TestSetting>Bin\ServerLocalTestRun.testrunconfig</TestSetting>
</Config>
